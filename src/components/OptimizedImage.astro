---
import { Image } from 'astro:assets';

interface Props {
  src: ImageMetadata;
  alt: string;
  width: number;
  height: number;
  class?: string;
  priority?: boolean;
}

const { src, alt, width, height, class: className, priority = false } = Astro.props;
---

<div class="relative">
  {/* Low quality placeholder */}
  <div 
    class="absolute inset-0 blur-lg scale-110 transform"
    style={`background-image: url(${src.src}?w=20&q=10); background-size: cover;`}
  />
  
  <Image
    src={src}
    alt={alt}
    width={width}
    height={height}
    class={`relative ${className}`}
    loading={priority ? "eager" : "lazy"}
    decoding={priority ? "sync" : "async"}
    format="webp"
    quality={85}
    fetchpriority={priority ? "high" : "auto"}
  />
</div> 